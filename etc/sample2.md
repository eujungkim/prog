#### 기본 요구사항
- 파일 처리
  - 파일 read : 압축/암호화할 파일 읽기
  - 파일 write : 압축/암호화된 파일 생성
- 파일 압축
  - 줄 압축 : 동일한 내용의 line이 반복될 경우 압축
  - 내용 압축 : 한 line에서 동일한 문자가 반복될 경우 압축
- 파일 전송
  - ine별 전송
  - 오류 발생시 재전송
  - 특정 line 전송

#### 추가 요구사항
##### 확장성
- 압축 알고리즘은 변경 가능해야 한다.
- 암호화 알고리즘은 변경 가능해야 한다.
##### 성능
- 다중 사용자에 대한 요청을 처리할 수 있어야 한다. : 서버의 처리량보다 사용자 요청이 많을 경우에도 처리가 가능해야 한다.
- 동일 파일에 대한 압축은 가능한 최소화한다. : 동일한 파일에 대해 동일한 알고리즘으로 압축/암호화 하는 것을 최소화하기 위해 압축/암호화 파일은 별도로 관리한다. 단, 관리하는 파일의 양은 적정 수준을 유지해야 한다.
- 대용량 파일 저장소는 확장 가능해야 한다.
- 다국적으로 서비스를 제공해야 할 경우, 지역별(예. 아시아, 북미, 유럽 등)로 서버 배치 : 지역간 파일 및 데이터 동기화를 고려해야 함
##### 보안
- 무결성 확인을 위한 체크섬 관리 (SHA-1,  MD5 등) : 체크섬을 제공하여 파일이 정상적으로 다운로드 되었는지 확인할 수 있도록 한다.
- 블랙리스트 관리 : 요청 이력(IP, 건수, 용량) 등을 기반으로 시스템에 부하가 갈 정도로 악의적 요청을 보내는 클라이언트 차단
##### 신뢰성
- 서비스 중단을 방지하도록 시스템을 이중화해야 한다.
##### 기능
- 파일 업로드 및 삭제 : 전송할 대용량 파일 관리 (저장소에 업로드, 저장소에서 삭제)
- 파일 목록 검색 및 페이징 : 전송할 대용량 파일을 검색할 수 있는 기능. 건수가 많을 경우 페이징으로 출력하는 기능.
- 전송 중 오류가 발생한 경우 재전송이 가능해야 한다. : 파일 전송 도중 오류가 발생하여 다시 전송할 경우, 처음부터 다시 전송 받는 것이 아니라 오류가 발생한 부분부터 이어서 전송한다.
- 사용자 관리
- 로그인/로그아웃
- 그룹 관리 : 사용자를 그룹 단위로 관리할 수 있는 기능
- 권한 관리 : 사용자 또는 그룹 단위로 다운로드 가능한 파일 권한 관리,  파일을 관리(업로드 및 삭제)할 수 있는 사용자 권한 관리
- 사용 이력 로깅 : 파일별, 사용자별 전송 이력을 로깅한다. 시스템 부하를 막기 위해 특정 기간(예. 6개월)이 지난 이력은 주기적으로 삭제한다.
- 사용량 측정
- 스케쥴링 (예약 전송) : 사용자가 원하는 시간 또는 주기적으로 특정 파일을 지정하여 예약 전송할 수 있는 기능
- 보고서 생성 : 관리자를 위해 특정 기간에 대한 보고서 생성
- 과금 관리 : 사용자별 과금 관리

#### 메커니즘 분석
##### 압축 유틸리티
성능 테스트를 수행하여 목적에 맞는 압축 유틸리티를 선정한다.
- 측정 항목: 압축 속도 및 압축률, 압축 속도, 압축 해제 속도, 압축 사이즈 / 원본 사이즈 비율, 리소스 사용률 (CPU 및 메모리)
- 기타 고려 사항
  - 라이선스
  - 오픈 소스인 경우 릴리즈, 커밋 건수 등 커뮤니티 활동 상황
  - 지원 언어
- 대상 유틸리티의 예 : gzip, bzip2, 7za 등

##### 암호화
암호화 알고리즘을 선정한다. 전송된 파일을 사용자가 압축 해제할 수 있는 양방향 암호화 알고리즘 중 선택한다.
<br>
후보 알고리즘을 선정 후 암호화 성능을 측정한다. 시스템에 감내할 수 있는 최소 수준의 성능에 매치하면서 보안성이 높은 알고리즘을 선정한다.
<br>
보다 높은 수준으로 보안을 강화해야 할 경우에는 비대칭키 알고리즘을 선정하고, 인증서 발급을 위한 CA 도입을 고려한다.

- 대칭키 알고리즘
  - 특징 : 암복호화에 서로 동일한 키가 사용되는 암호화 방식
  - 장점 : 암호화 속도가 빠르다
  - 단점 : 송신 측에서 수신 측에 암호키를 전달하는 과정에서 노출 우려가 있다.
  - 알고리즘의 예 : 3DES, AES, ARIA, SEED 등
- 비대칭키 알고리즘
  - 특징 : 암복호화에 서로 다른 키가 사용되는 암호화 방식. 하나의 키는 공개키로 사용.
  - 장점 : 암호키 전달 과정이 불필요하므로 안정성이 높다.
  - 단점 : 대칭키 방식에 비해 느리다
  - 알고리즘의 예 : RSA, ECC 등

##### 압축/암호화 메커니즘
시스템 전체에서 단일 알고리즘을 사용할 경우에는 proxy patter을 이용해 구현하고, 복수 개의 알고리즘을 사용할 경우에는 factory pattern을 사용한다.
<br>
알고리즘별 구현체를 Config 컴포넌트를 이용해 설정으로 관리한다.
<br>
Config 컴포넌트는 별도의 설정 파일을 통해 시스템 전반의 설정을 관리하며, reload 수행시 config에 대한 조회를 block함으로써 일관성을 유지한다.
![image](https://github.com/eujungkim/prog/assets/7552395/72e2be63-96ab-424b-a278-94209d7f0927)

- 제약 사항
  - 클라이언트 영역에도 동일하게 압축 해제 및 복호화 매커니즘이 적용되어 있어야 한다.
